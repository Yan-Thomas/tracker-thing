---
import { isShallowRepo, pluginConfig } from 'virtual:lunaria-starlight';
import { loadConfig } from '@lunariajs/core/config';
import { generateDashboard } from '@lunariajs/core/dashboard';
import { getStatusFromCache } from '../cache';

const { userConfig, rendererConfig } = await loadConfig(pluginConfig.configPath);
const status = await getStatusFromCache(userConfig, isShallowRepo);
---

<Fragment set:html={generateDashboard(userConfig, rendererConfig, status)} />
